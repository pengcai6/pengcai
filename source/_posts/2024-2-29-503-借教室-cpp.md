---
title: 2024-2-29-503-借教室.cpp
author: cai6
abbrlink: 46112
date: 2024-02-29 21:25:57
tags:
---
# 2024-2-29-503-借教室.cpp
```
#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int N=1e6+10;
struct st{
int d,s,t;
};
st s[N];
int n,m;
int r[N];
long long diff[N];
bool check(int m)
{memset(  diff, 0, sizeof diff);
    for(int i=1;i<=m;i++)
       { diff[s[i].s]+=s[i].d;
        diff[s[i].t+1]-=s[i].d;}

    for(int i=1;i<=n;i++)
    {diff[i]+=diff[i-1];
        if(r[i]<diff[i])
        return false;}

return true;

}

int main()
{
    cin>>n>>m;
for(int i=1;i<=n;i++)
    scanf("%d",&r[i]);
for(int i=1;i<=m;i++)
    scanf("%d%d%d",&s[i].d,&s[i].s,&s[i].t);

int l=1,r=m;
while(r>l)
{int mid=(r+l+1)>>1;
    if(check(mid))
        l=mid;
    else r=mid-1;
}

if(l==m)
    cout<<0;
else cout<<-1<<endl<<r+1;

return 0;
}

```